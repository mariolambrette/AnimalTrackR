% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/classify_hmm_utils.R
\name{.extract_hmm_states}
\alias{.extract_hmm_states}
\title{INTERNAL Extract HMM state assignments and probabilities}
\usage{
.extract_hmm_states(fitted_model, n_obs, complete_idx)
}
\arguments{
\item{fitted_model}{Fitted hmmTMB model object}

\item{n_obs}{Integer. Total number of observations in original dataset}

\item{complete_idx}{Logical vector indicating which rows had complete feature
data and were used in model fitting}
}
\value{
List with two elements:
\itemize{
\item \code{states}: Integer vector of length \code{n_obs} with state
assignments (NA for rows not used in fitting)
\item \code{state_probs}: Numeric vector of length \code{n_obs} with
probabilities of assigned states (NA for rows not used in fitting)
}
}
\description{
Decodes hidden states from a fitted HMM using Viterbi algorithm and extracts
state probabilities. Maps results back to original dataset, handling rows
with missing feature values.
}
\details{
Uses the Viterbi algorithm (\code{fitted_model$viterbi()}) to find the most
likely sequence of hidden states. Extracts the probability of each assigned
state from the state probability matrix. Returns NA for all observations if
Viterbi decoding fails.
}
\keyword{internal}
