% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/classify_activity_utils.R
\name{.create_composite_score}
\alias{.create_composite_score}
\title{INTERNAL: Create composite activity score from multiple features}
\usage{
.create_composite_score(
  dets,
  feature_cols,
  method = "mean",
  feature_weights = NULL,
  indiv_id = NULL
)
}
\arguments{
\item{dets}{Dataframe containing normalized feature columns}

\item{feature_cols}{Character vector of normalized feature column names
(e.g., "norm_speed", "norm_acceleration")}

\item{method}{Character. Method for combining features: "mean" (simple
average), "pca" (first principal component), or "weighted" (weighted mean)}

\item{feature_weights}{Named numeric vector of feature weights for
"weighted" method. Must match length and names of feature_cols (with
"norm_" prefix). Weights are normalized to sum to 1 internally}

\item{indiv_id}{Character. Optional column name for individual ID. When
provided with method = "pca", PCA is run separately per individual}
}
\value{
Dataframe with added \code{activity_score} column. For PCA method,
includes attribute "pca_loadings_by_fish" with loadings for each
individual. For weighted method, includes attribute "feature_weights"
with normalized weights
}
\description{
Combines multiple normalized movement features into a single composite
activity score using mean, PCA, or weighted mean methods. For PCA method,
analysis is conducted separately per individual and loadings are stored
as attributes.
}
\keyword{internal}
